<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Compiled and minified CSS -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"> -->

    <!-- Compiled and minified JavaScript -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/justgage@1.4.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/gaugeJS/dist/gauge.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <script src="javascript/main.js"></script>
    <link rel="stylesheet" href="style/style.css">

    <title>Document</title>
</head>

<body>
    <div class="container-fluid header">

        <div class="row">
            <div class="col-md-2">
                <div class="HeaderCenter">
                    <img id="moonlander" src="image/logo maanlander.jpeg" alt="">
    
                </div>
            </div>
            <div class="col-md-2">
                <div class="PaginaMenu">
                    <div class="dropdown HeaderCenter">
                        <button class="dropbtn">Pagina</button>
                        <div class="dropdown-content">
                            <a href="index.html" >Home</a>
                            <a href="Dashboard.html" >Dashboard</a>
    
                            <a href="Data.html" >Data</a>
                            <a href="Besturen.html" >Besturen</a>
    
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="ThemaMenu">
                    <div class="dropdown HeaderCenter">
                        <button class="dropbtn">Thema</button>
                        <div class="dropdown-content">
                            <a href="#!" id="Light" onclick="ChangeThema('#333333' ,'#1D2128' , '#ffffff')">Donker</a>
                            <a href="#!" id="Donker" onclick="ChangeThema('#F3F4F6' , '#DEE1E6' , '#000000')">Light</a>
    
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="ColorMenu">
                    <div class="dropdown HeaderCenter">
                        <button class="dropbtn">Color</button>
                        <div class="dropdown-content">
                            <a href="#!" id="Rood" onclick="changeColor('#FF5353')">Rood (Red)</a>
                            <a href="#!" id="Blauw" onclick="changeColor('#03AED2')">Blauw (Blue)</a>
                            <a href="#!" id="Green" onclick="changeColor('#61F2C2')">Green</a>
                            <a href="#!" id="Roze" onclick="changeColor('#EF9CDA')">Roze</a>
                            <a href="#!" id="Oranje" onclick="changeColor('#FA813F')">Oranje</a>
    
    
                        </div>
                    </div>
                </div>
            </div>

            
        </div>
    
       
    </div>
    <script src="javascript/Header.js"></script>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2">
                <a href="Index.html">
                    <button id="terug">
                        <p>Terug</p>
                    </button>
                </a>
            </div>
            <div class="col-md-10"></div>
        </div>

    </div>
    <div class="container ">
        <div class="row">
            <div class="col-md-6">
                <div class="secotor">
                    <!-- <img class="theme_color" src="image/gamepad-solid.svg"> -->
                    <div class="card">
                        <div class="topcard">
                            <h3>
                                Motor
                            </h3>
                        </div>
                        <div class="bottomcard">


                            <div class="toggle-button-cover">
                                <div class="button-cover">
                                    <div class="button b2" id="button-13">
                                        <input type="checkbox" id="MotorCheckbox" class="checkbox" value="off" />
                                        <div class="knobs">
                                            <span></span>
                                        </div>
                                        <div class="layer"></div>
                                    </div>
                                </div>


                            </div>
                            <div id="MotorData">
                                <input id="motorslider" type="range" value="0" min="0" max="100"
                                    oninput="updateMotorSliderValue(this.value)">
                                <label id="rangeLabel">0</label>
                                <canvas class="center" id="MotorGaugeControl"></canvas>
                                <!-- Canvas element for the gauge -->

                            </div>



                        </div>

                    </div>

                </div>


            </div>
            <div class="col-md-6">
                <div class="secotor">
                    <!-- <img class="theme_color" src="image/gamepad-solid.svg"> -->
                    <div class="card">
                        <div class="topcard">
                            <h3>
                                Servo
                            </h3>
                        </div>
                        <div class="bottomcard">

                            <div class="left">
                                <div class="textContainer">
                                    <span id="arm1Degree">Arm 1: 0 째</span>
                                    <br>
                                    <span id="arm2Degree">Arm 2: 0 째</span>
                                    <br>
                                    <input type="range" value="0" min="0" max="90" id="sldArm1" placeholder="0" />
                                    <input type="range" value="0" max="180" id="sldArm2" placeholder="0" />


                                    <button type="button" id="applyButton">Apply</button>
                                </div>
                            </div>
                            <div class="right">
                                <div class="svgContainer">

                                    <!-- Start of the svg -->
                                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
                                    <svg xmlns:dc="http://purl.org/dc/elements/1.1/"
                                        xmlns:cc="http://creativecommons.org/ns#"
                                        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                        xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"
                                        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                                        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="220mm"
                                        height="160mm" viewBox="0 0 219.99999 160" version="1.1" id="arm"
                                        inkscape:version="1.0.2 (e86c870879, 2021-01-15, custom)"
                                        sodipodi:docname="svg_robot_arm_2Link_v8_noCircleOutlines.svg">
                                        <defs id="defs2" />
                                        <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666"
                                            borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2"
                                            inkscape:zoom="0.86607465" inkscape:cx="347.14778" inkscape:cy="425.51398"
                                            inkscape:document-units="mm" inkscape:current-layer="layer1"
                                            inkscape:document-rotation="0" showgrid="false" units="mm"
                                            inkscape:window-width="1920" inkscape:window-height="1017"
                                            inkscape:window-x="-8" inkscape:window-y="-8"
                                            inkscape:window-maximized="1" />
                                        <metadata id="metadata5">
                                            <rdf:RDF>
                                                <cc:Work rdf:about="">
                                                    <dc:format>image/svg+xml</dc:format>
                                                    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                                                    <dc:title />
                                                </cc:Work>
                                            </rdf:RDF>
                                        </metadata>
                                        <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1"
                                            style="display:inline">
                                            <rect
                                                style="fill:#4596ad;fill-opacity:1;stroke-width:0.20806;stroke-opacity:0"
                                                id="rect860" width="30.244217" height="13.74737" x="94.807755"
                                                y="133.48042" />
                                            <g id="group_robot_arm_total">
                                                <circle
                                                    style="opacity:0.994;fill:none;stroke:none;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none"
                                                    id="path841" cx="110" cy="140" r="130" />
                                                <g id="group_link2_endEffector">
                                                    <circle
                                                        style="fill:#5cc7e4;fill-opacity:1;stroke-width:0.0876373;stroke-opacity:0"
                                                        id="circle854" cx="110" cy="90" r="10" />
                                                    <path id="rect917"
                                                        style="fill:#008080;fill-opacity:1;stroke:none;stroke-width:0.264999;stroke-opacity:0"
                                                        d="M 96.710885,17.698519 V 45.498888 H 123.28911 V 17.698519 h -4.73563 V 40 H 101.44601 V 17.698519 Z" />
                                                    <rect
                                                        style="fill:#008080;fill-opacity:1;stroke-width:0.141403;stroke-opacity:0"
                                                        id="rect856" width="10" height="50" x="105" y="40"
                                                        ry="2.5487208" />
                                                    <circle
                                                        style="display:inline;opacity:0.994;fill:none;stroke:none;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none"
                                                        id="path841-0" cx="110" cy="90" r="75" />
                                                </g>
                                                <circle
                                                    style="fill:#5cc7e4;fill-opacity:1;stroke-width:0.0876372;stroke-opacity:0"
                                                    id="path833" cx="110" cy="140" r="10" />
                                                <rect
                                                    style="fill:#008080;fill-opacity:1;stroke-width:0.141403;stroke-opacity:0"
                                                    id="rect835" width="10" height="50" x="105" y="90" ry="2.5487208" />
                                            </g>
                                        </g>
                                    </svg>

                                </div>
                                <script>
                                    const svgContainer = document.querySelector('.svgContainer');  // Select by class

                                    // For this project
                                    const group_link2_endEffector = document.getElementById('group_link2_endEffector');
                                    const group_robot_arm_total = document.getElementById('group_robot_arm_total');

                                    const textContainer = document.querySelector('.textContainer');
                                    const j1Text = document.getElementById('j1Text');
                                    const j2Text = document.getElementById('j2Text');

                                    const Slider1 = document.getElementById('sldArm1');
                                    const Slider2 = document.getElementById('sldArm2');

                                    const applyButton = document.getElementById("applyButton");

                                    // Center the svg container
                                    // svgContainer.style.position = 'absolute';
                                    // svgContainer.style.top = '50%';
                                    // svgContainer.style.left = '50%';
                                    // svgContainer.style.transform = 'translate(-50%, -50%)'; // Equivalent to xPercent and yPercent

                                    // Position the text boxes relative to the bee
                                    // textContainer.style.position = 'absolute';
                                    // textContainer.style.top = '70%';
                                    // textContainer.style.left = '20%';
                                    // textContainer.style.transform = 'translate(-20%, -20%)'; // Equivalent to xPercent and yPercent

                                    // Record origin at beginning
                                    const bbox = group_robot_arm_total.getBBox();
                                    const cx = bbox.x + bbox.width / 2;
                                    const cy = bbox.y + bbox.height / 2;
                                    const svgOrg = `${cx} ${cy}`; // String concatenation

                                    // Get value from text boxes when apply button is clicked and print value to the console
                                    applyButton.addEventListener('click', onApplyBtnClick);
                                    Slider1.addEventListener("input", onApplyBtnClick)
                                    Slider2.addEventListener("input", onApplyBtnClick)

                                    // Click event function
                                    function onApplyBtnClick() {
                                        const j1Val = parseFloat(Slider1.value) || 0; // Get value and convert to number, default 0
                                        const j2Val = parseFloat(Slider2.value) || 0; // Get value and convert to number, default 0


                                        const arm1Text = document.getElementById("arm1Degree")
                                        const arm2Text = document.getElementById("arm2Degree")

                                        arm1Text.textContent = "Arm 1: " + j1Val + " 째"
                                        arm2Text.textContent = "Arm 2: " + j2Val + " 째"

                                        console.log("Moving the robot arm to j1: " + j1Val + ", j2: " + j2Val + " (degrees)");
                                        rotateJoint1(j1Val);
                                        rotateJoint2(j2Val);
                                        ControllArm(j1Val, j2Val)

                                    }

                                    function moveTheBee(myXVal, myYVal) {
                                        // Implement bee movement logic (not provided in original code)
                                    }

                                    function rotateJoint1(mydegrees) {
                                        gsap.to(group_robot_arm_total, { duration: 0.2, rotation: -mydegrees, svgOrigin: svgOrg });
                                    }

                                    function rotateJoint2(mydegrees) {
                                        gsap.to(group_link2_endEffector, { duration: 0.2, rotation: -mydegrees, transformOrigin: "center center" });
                                    }
                                </script>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
    </div>

    <script>

        let controllerIndex = null;

        const motorslider = document.getElementById("motorslider");
        const MotorData = document.getElementById("MotorData");
        MotorData.style.opacity = "0.2"

        const ArmSlider1 = document.getElementById("sldArm1");
        const ArmSlider2 = document.getElementById("sldArm2");

        const checkboxMotor = document.getElementById('MotorCheckbox');
        const motorRangeLabel = document.getElementById("rangeLabel");





        window.addEventListener("gamepadconnected", (event) => {
            handleConnectDisconnect(event, true);
        });

        window.addEventListener("gamepaddisconnected", (event) => {
            handleConnectDisconnect(event, false);
        });

        function ChangeToggleOpacity(checkbox) {
            var MotorData = document.getElementById("MotorData"); // Assuming MotorData is the element whose opacity you want to change
            var motorslider = document.getElementById("motorslider");
            var motorRangeLabel = document.getElementById("rangeLabel");

            if (checkbox.checked == true) {
                console.log("aan")
                MotorData.style.opacity = "1"
            }
            else if (checkbox.checked == false || checkbox.value == "off") {
                console.log("Uit")
                motorslider.value = 0;
                motorRangeLabel.innerHTML = "0"
                MotorData.style.opacity = "0.2";
                gauge.set(0); // set actual value

            }
            else {
                console.log("Error")

            }

        }
        checkboxMotor.addEventListener("change", function () {
            ChangeToggleOpacity(this);

        });

        // Add event listener for the "change" event
        // checkboxMotor.addEventListener("change", function () {
        //     // Check if the checkbox is checked
        //     if (this.checked) {
        //         // Perform action when checkbox is checked
        //         console.log("Checkbox is checked");
        //         // You can add your code here to perform any action when the checkbox is checked
        //     } else {
        //         // Perform action when checkbox is unchecked
        //         console.log("Checkbox is unchecked");
        //         // You can add your code here to perform any action when the checkbox is unchecked
        //     }
        // });


        // vedandert waarde label
        function updateMotorSliderValue(newValue) {
            document.getElementById("rangeLabel").innerText = newValue;
            gauge.set(newValue); // set actual value

        }

        function handleConnectDisconnect(event, connected) {
            const controllerAreaNotConnected = document.getElementById(
                "controller-not-connected-area"
            );
            const controllerAreaConnected = document.getElementById(
                "controller-connected-area"
            );

            const gamepad = event.gamepad;
            console.log(gamepad);

            if (connected) {
                controllerIndex = gamepad.index;

                console.log("connected")
            } else {
                controllerIndex = null;
                console.log(" not connected")

            }
        }

        function updateMotorSlider(value) {
            // Update the element (for example, you can set its value)
            motorslider.value = value;
            motorRangeLabel.innerText = value
            // Here, I'll just log the value for demonstration purposes
            console.log("Slider value:", value);
            gauge.set(value)
        }

        function updateArmSlider2(value) {
            // Update the element (for example, you can set its value)
            ArmSlider2.value = value;
            // Here, I'll just log the value for demonstration purposes
            console.log("Slider value:", value);
            onApplyBtnClick();
        }
        function updateArmSlider1(value) {
            // Update the element (for example, you can set its value)
            ArmSlider1.value = value;
            // Here, I'll just log the value for demonstration purposes
            console.log("Slider value:", value);
            onApplyBtnClick();
        }

        function handleButton3Action() {
            console.log("Y gedrukt")
            // Toggle the checkbox based on Y button state
            const checkboxMotor = document.getElementById('MotorCheckbox');



            if (checkboxMotor.checked == true) {
                checkboxMotor.checked = false
                motorRangeLabel.innerHTML = "0"
                MotorData.style.opacity = "0.2";
                gauge.set(0); // set actual value
            }
            else if (checkboxMotor.checked == false) {

                checkboxMotor.checked = true
                MotorData.style.opacity = "1";

            }
            else {
                console.log("Error")

            }

            // checkboxMotor.checked = !checkboxMotor.checked;
            setTimeout(() => {
                console.log("tomout")
            }, 10000);
        }
        function handleButton4Action() {
            let originalvalue = parseInt(ArmSlider1.value, 10);

            let newValue = originalvalue + 1

            updateArmSlider1(newValue)
            console.log("knop 4")
        }
        function handleButton5Action() {

            let originalvalue = parseInt(ArmSlider1.value, 10);

            let newValue = originalvalue - 1

            updateArmSlider1(newValue)
            console.log("knop 5")

        }
        function handleButton6Action() {

            let originalvalue = parseInt(ArmSlider2.value, 10);

            let newValue = originalvalue + 1

            updateArmSlider2(newValue)
            console.log("knop 6")

        }
        function handleButton7Action() {
            let originalvalue = parseInt(ArmSlider2.value, 10);

            let newValue = originalvalue - 1

            updateArmSlider2(newValue)
            console.log("knop 7")
        }

        function handleButton14Action() {
            let originalvalue = parseInt(motorslider.value, 10);

            let newValue = originalvalue + 1

            updateMotorSlider(newValue)
            console.log("knop 14")
        }
        function handleButton15Action() {
            let originalvalue = parseInt(motorslider.value, 10);

            let newValue = originalvalue - 1

            updateMotorSlider(newValue)
            console.log("knop 8")
        }
        function handleButtons(buttons) {
            for (let i = 0; i < buttons.length; i++) {
                const buttonValue = buttons[i].value;
                // updateButtonOnGrid(i, buttonValue);
                // updateControllerButton(i, buttonValue);
                if (i === 3 && buttonValue > 0) {
                    handleButton3Action();
                }
                // Specific actions for button 4
                if (i === 4 && buttonValue > 0) {
                    handleButton4Action();
                }

                // Specific actions for button 5
                if (i === 5 && buttonValue > 0) {
                    handleButton5Action();
                }
                // Specific actions for button 6
                if (i === 6 && buttonValue > 0) {
                    handleButton6Action();
                }

                // Specific actions for button 7
                if (i === 7 && buttonValue > 0) {
                    handleButton7Action();
                }

                // Specific actions for button 7
                if (i === 14 && buttonValue > 0) {
                    handleButton14Action();
                }
                // Specific actions for button 7
                if (i === 15 && buttonValue > 0) {
                    handleButton15Action();
                }
            }
        }

        function handleSticks(axes, gamepad) {
            updateLeftRight(axes[0], gamepad);
            updateUpDown(axes[1], gamepad);
            updateLeftRight(axes[2], gamepad);
            updateUpDown(axes[3], gamepad);
        }

        function updateLeftRight(leftRightAxis, gamepad) {


            if (leftRightAxis >= 0.1) {
                let originalvalue = parseInt(motorslider.value, 10);

                let newValue = originalvalue + 1

                if (newValue >= 100) {
                    startRumble(gamepad)
                    console.log("maxed out")
                }

                updateMotorSlider(newValue)
                console.log("knop 4")
            } else if (leftRightAxis <= -0.1) {
                // Execute this block when leftRightAxis is negative and less than or equal to -0.1
                let originalValue = parseInt(motorslider.value, 10);
                let newValue = originalValue - 1;
                updateMotorSlider(newValue);
                console.log("Slider moved left");

                if (newValue <= 0) {

                    startRumble(gamepad)
                    console.log("too low")


                }
            }

            // else {
            //     let originalvalue = parseInt(motorslider.value, 10);

            //     let newValue = originalvalue - 1

            //     updateMotorSlider(newValue)
            //     console.log("knop 4")
            // }
        }

        function updateUpDown(upDownAxis) {

            if (upDownAxis > 0) {
            } else {
            }
        }
        function startRumble(gamepad) {
            if (!gamepad) return;

            // Check if the gamepad supports vibration
            if ("vibrationActuator" in gamepad && gamepad.vibrationActuator) {
                gamepad.vibrationActuator.playEffect("dual-rumble", {
                    startDelay: 0,
                    duration: 200,
                    weakMagnitude: 0.3,
                    strongMagnitude: 1.0
                }).then(() => {
                    console.log("Rumble started!");
                }).catch(err => {
                    console.error("Failed to start rumble:", err);
                });
            } else {
                console.log("This gamepad does not support vibration.");
            }
        }




        function gameLoop(rumble) {
            if (controllerIndex !== null) {
                const gamepad = navigator.getGamepads()[controllerIndex];
                handleButtons(gamepad.buttons);
                // handleRumble(gamepad);
                handleSticks(gamepad.axes, gamepad);

                console.log("connecting")
            }
            requestAnimationFrame(gameLoop);
        }

        gameLoop();

        var opts = {
            angle: -0.01, // The span of the gauge arc
            lineWidth: 0.2, // The line thickness
            radiusScale: 1, // Relative radius
            pointer: {
                length: 0.6, // // Relative to gauge radius
                strokeWidth: 0.026, // The thickness
                color: '#ffffff' // Fill color
            },

            limitMax: false,     // If false, max value increases automatically if value > maxValue
            limitMin: false,     // If true, the min value of the gauge will be fixed
            colorStart: savedColor,   // Colors
            colorStop: savedColor,    // just experiment with them
            strokeColor: '#333333',  // to see which ones work best for you
            generateGradient: true,
            highDpiSupport: true,     // High resolution support

        };


        var motor_text = document.getElementById('usage'); // your canvas element
        var target = document.getElementById('MotorGaugeControl'); // your canvas element

        var gauge = new Gauge(target).setOptions(opts); // create sexy gauge!
        gauge.maxValue = 100; // set max gauge value
        gauge.setMinValue(0);  // Prefer setter over gauge.minValue = 0
        gauge.animationSpeed = 70; // set animation speed (32 is default value)
        gauge.set(0); // set actual value
        motor_text.textContent = gauge.value + "%";

    </script>

    <!-- <script>
        // Get the range input and label
        const range = document.getElementById('range');

        const label = document.getElementById('rangeLabel');

        // Function to update label value
        function updateLabel() {
            label.textContent = range.value;
        }

        // Update label when input value changes
        range.addEventListener('input', updateLabel);
        // range2.addEventListener('input', updateLabel);

        // Initial update of label
        updateLabel();


        // controller check


        // Get the range input element
        const rangeInput = document.getElementById('range');
        const armInput = document.getElementById('sldArm1');

        // Function to update the element based on the range value
        function updateElement(value) {
            // Update the element (for example, you can set its value)
            rangeInput.value = value;
            // Here, I'll just log the value for demonstration purposes
            console.log("Slider value:", value);
        }
        function updateArm(value) {
            // Update the element (for example, you can set its value)
            armInput.value = value;
            // Here, I'll just log the value for demonstration purposes
            console.log("Slider value:", value);
        }
        // Function to handle gamepad input
        function MotorControll() {
            // Get the first connected gamepad
            const gamepad = navigator.getGamepads()[0];


            if (gamepad) {
                // Adjust the range value based on gamepad input
                const newValue = parseInt(rangeInput.value) +
                    // (gamepad.axes[1] === 1 ? -2 : 0) + // Down button pressed
                    // (gamepad.axes[1] === -1 ? 2 : 0);    // Up button pressed
                    (gamepad.axes[1] === 1 ? -2 : 0) + // Down button pressed
                    (gamepad.axes[1] === -1 ? 2 : 0);    // Up button pressed
                // Ensure the new value stays within the range limits
                const min = 0;
                const max = 100;
                // const clampedValue = Math.min(Math.max(newValue, min), max);
                const clampedValue = Math.min(Math.max(newValue, min), max);
                console.log("activated")
                // Update the element with the clamped value
                updateElement(clampedValue);

                updateLabel();

            }
            // if (gamepad) {
            //     // Adjust the range value based on gamepad input
            //     const newValue = parseInt(rangeInput.value) +
            //         (gamepad.buttons[4] === 1 ? -2 : 0) + // Down button pressed
            //         (gamepad.buttons[6] === -1 ? 2 : 0);    // Up button pressed
            //     // Ensure the new value stays within the range limits
            //     const min = parseInt(rangeInput.min);
            //     const max = parseInt(rangeInput.max);
            //     const clampedValue = Math.min(Math.max(newValue, min), max);

            //     // Update the element with the clamped value
            //     // controllArm(clampedValue);

            //     // updateLabel();

            // }

            // if (gamepad) {
            //     // Check if the Y button is pressed
            //     const yButtonPressed = gamepad.buttons[3].pressed; // Assuming the Y button is at index 3
            //     console.log("Y gedrukt")
            //     // Toggle the checkbox based on Y button state
            //     if (yButtonPressed) {
            //         const checkbox = document.querySelector('.checkbox');

            //         checkbox.checked = !checkbox.checked;

            //     }
            // }
        }
        function MotorOnOff() {
            // Get the first connected gamepad
            const gamepad = navigator.getGamepads()[0];

            if (gamepad) {
                // Check if the Y button is pressed
                const yButtonPressed = gamepad.buttons[3].pressed; // Assuming the Y button is at index 3
                console.log("Y gedrukt")
                // Toggle the checkbox based on Y button state
                if (yButtonPressed) {
                    const checkbox = document.querySelector('.checkbox');

                    checkbox.checked = !checkbox.checked;

                }
            }

        }
        function ArmControll() {
            // Get the first connected gamepad
            const gamepad = navigator.getGamepads()[0];

            if (gamepad) {
                // Check if the Y button is pressed
                const xButtonPressed = gamepad.buttons[0].pressed; // Assuming the Y button is at index 3
                console.log("x gedrukt")
                // Toggle the checkbox based on Y button state
                if (xButtonPressed) {
                    const checkbox = document.querySelector('.checkbox');

                    console.log(armInput.value)
                    newValue = armInput.value + 1

                    updateArm(newValue);

                    // setTimeout(() => {
                    //     updateArm(newValue);
                    //     console.log("updating")
                    // }, 100); // 
                }
            }

        }
        // Function to start listening for gamepad input
        function startGamepadListener() {
            // Check for gamepad support
            if (!navigator.getGamepads) {
                console.log('Gamepad API not supported.');
                return;
            }

            // Start the gamepad input loop
            function update() {
                MotorControll();
                MotorOnOff();
                ArmControll();
                requestAnimationFrame(startGamepadListener);
                window.addEventListener("gamepadconnected", (event) => {
                    const gamepad = event.gamepad;
                    console.log(gamepad)
                })
            }

            update();
        }

        // Start listening for gamepad input
        startGamepadListener();


    </script> -->
    <script>

        function ControllArm(Arm1, Arm2) {
            const url = 'http://145.49.127.247:1880/aaadlander/aaad3?arm1=' + Arm1 + '&arm2=' + Arm2
            // const url = 'http://145.49.127.247:1880/aaadlander/aaad3?command=kaas'
            const datas = {
                key1: 'Test 1',
                key2: 'Test 2'
            };

            // POST request using fetch
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(datas),
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('POST request successful');
                    console.log('Response:', data);
                })
                .catch(error => {
                    console.error('There was a problem with the POST request:', error);
                });
        }

    </script>
</body>

</html>